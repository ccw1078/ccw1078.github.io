<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Code Review | Ccw&#39;s Blogs</title>

  
  <meta name="author" content="ccw">
  

  
  <meta name="description" content="Code Review标准代码审核的目标，是为了让整个项目的代码库，随着时间推移，质量有所进步，而不是发生了退化；
为了达到这个目标，需要做一些取舍：

小步迭代胜于追求完美主义；
确保代码质量不退化，是审核人员的责任；
审核人员对所审核的代码拥有责任和相同的所有权；

原则：只要所提交的代码改进了">
  

  
  
  <meta name="keywords" content="软件">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="Code Review"/>

  <meta property="og:site_name" content="Ccw&#39;s Blogs"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Ccw&#39;s Blogs" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">Ccw&#39;s Blogs</a>
    </h1>
    <p class="site-description"></p>
  </div>
  <nav class="site-navigation">
    <ul>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>Code Review</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2021/06/21/Code Review/" rel="bookmark">
        <time class="entry-date published" datetime="2021-06-21T00:10:00.000Z">
          2021-06-21
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="Code-Review"><a href="#Code-Review" class="headerlink" title="Code Review"></a>Code Review</h2><h3 id="标准"><a href="#标准" class="headerlink" title="标准"></a>标准</h3><p>代码审核的目标，是为了让整个项目的代码库，随着时间推移，质量有所进步，而不是发生了退化；</p>
<p>为了达到这个目标，需要做一些取舍：</p>
<ul>
<li>小步迭代胜于追求完美主义；</li>
<li>确保代码质量不退化，是审核人员的责任；</li>
<li>审核人员对所审核的代码拥有责任和相同的所有权；</li>
</ul>
<p>原则：只要所提交的代码改进了代码库的质量，即使该代码不完美，也应该审核通过；</p>
<p>质量改进维度：</p>
<pre><code>* 更容易维护；
* 更容易阅读；
* 更容易理解；
</code></pre>
<h4 id="经验交流"><a href="#经验交流" class="headerlink" title="经验交流"></a>经验交流</h4><p>代码走查同时是一种交流经验的机会，但不要强制遵守某种经验。可以在注释中某些更好的做法，但同时备注“仅供参考”；</p>
<h4 id="原则"><a href="#原则" class="headerlink" title="原则"></a>原则</h4><ul>
<li>事实和数据优于看法和偏好；</li>
<li>如果有代码风格规定的话，就遵守规定；没有规定的部分，则按作者的偏好；</li>
<li>软件设计不属于个人偏好的范畴，而应该遵守基本的原则，除非作者能够有充足的理由，能够证明其合理性；</li>
</ul>
<h4 id="处理冲突"><a href="#处理冲突" class="headerlink" title="处理冲突"></a>处理冲突</h4><ul>
<li>当出现冲突时，双方应根据既有原则达成一致意见；</li>
<li>如果有困难，则向上汇报，由其他人开会讨论协助判断；</li>
</ul>
<h3 id="走查什么"><a href="#走查什么" class="headerlink" title="走查什么"></a>走查什么</h3><h4 id="设计"><a href="#设计" class="headerlink" title="设计"></a>设计</h4><ul>
<li>是否设计良好？</li>
<li>模块之间是否高内聚，低耦合？</li>
</ul>
<h4 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h4><ul>
<li>功能是否能如预期那样工作？</li>
</ul>
<h4 id="复杂性"><a href="#复杂性" class="headerlink" title="复杂性"></a>复杂性</h4><p>是否过于复杂了，复杂的标准为“无法快速看懂代码要做什么”；主要包括以下几个层面：</p>
<ul>
<li>行、函数、类；</li>
<li>是否存在过度工程？</li>
</ul>
<h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><ul>
<li>是否包含单元测试、集成测试、端到端测试？</li>
<li>测试本身是否正确？</li>
</ul>
<h4 id="命名"><a href="#命名" class="headerlink" title="命名"></a>命名</h4><ul>
<li>命名是否合适，让人能够直接从名称看出意图或内容？</li>
</ul>
<h4 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h4><ul>
<li>注释是否用来说明原因，而不是用来描述动作？</li>
<li>是否为正则和复杂算法写了注释？</li>
<li>注释是否和文档有所区分，文档用来详细描述代码意图、使用方法、最终效果等；</li>
</ul>
<h4 id="风格"><a href="#风格" class="headerlink" title="风格"></a>风格</h4><ul>
<li>尽量使用既定的风格指南，除非有特殊原因；</li>
</ul>
<h4 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h4><ul>
<li>如果代码涉及外部使用方式的变化，则检查是否更新了文档（增加或者删除）；</li>
</ul>
<h4 id="每一行"><a href="#每一行" class="headerlink" title="每一行"></a>每一行</h4><ul>
<li>走查每一行代码，而不是假设某些代码能够正确运行，而忽略对它们的走查；</li>
<li>如果觉得某些代码过于复杂，自己没有把握确保它们的正确性，则应请求其他更有经验和能力的成员的帮助；</li>
<li>如果代码过于难懂，就要求作者解释它们；</li>
</ul>
<h4 id="宏观视角"><a href="#宏观视角" class="headerlink" title="宏观视角"></a>宏观视角</h4><ul>
<li>尝试站在更宏观的角度来思考代码变更可能带来的影响，而不是仅仅看局部出现变化的代码；</li>
<li>思考新的代码，是否让整个项目的代码质量退化了？如果是的话，应即时修正它；因为大退化总是由无数小退化累积起来的；</li>
</ul>
<h4 id="不吝赞美"><a href="#不吝赞美" class="headerlink" title="不吝赞美"></a>不吝赞美</h4><ul>
<li>当发现某些代码写得很好时，不要吝啬自己的赞美，在注释中把自己的赞美表达出来；</li>
</ul>
<h3 id="走查步骤"><a href="#走查步骤" class="headerlink" title="走查步骤"></a>走查步骤</h3><ul>
<li>先宏观的了解新提交的代码的目标（想要做些什么），并思考目标是否有意义，如果没有意义，就诚恳的提出，并给出新目标（如果这种情况经常发生，说明团队缺乏沟通，导致成员的工作目标不一致，应该改进）；</li>
<li>查看提交中发生最大变化的位置；如果发现设计问题，应该第一时间给作者指出，以免对方在错误的基础上继续走太远；</li>
<li>弄清楚目标后，按顺序浏览实现目标的文件；如果可以的话，看主要代码前，先看一下测试，也会对目标的了解提供帮助；</li>
</ul>
<h3 id="走查速度"><a href="#走查速度" class="headerlink" title="走查速度"></a>走查速度</h3><ul>
<li>走查的速度应该越快越好，因为反馈的越快，它带来的负面效果越小，正面效果越大；</li>
<li>走查的时间不应越过一天；一般来说，今天提交的代码，第二天应该给出反馈；</li>
<li>如果自己当前正在写代码，则不应停下来去做走查，而应该是当自己手头的任务完成后，再走查；</li>
<li>如果自己无法在1天内给出回复，则应该救助其他同事帮忙走查，而不是拖延；</li>
<li>如果提交走查的代码量很大，则应要求作者将它们进行拆分成多个提交；</li>
</ul>
<h3 id="如何写走查意见"><a href="#如何写走查意见" class="headerlink" title="如何写走查意见"></a>如何写走查意见</h3><ul>
<li>保持谦逊的态度；</li>
<li>说明理由；</li>
<li>鼓励作者简化代码，或者添加注释；</li>
</ul>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/软件/">软件</a>
    </span>
    

    </div>

    
  </div>
</article>

  









    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2024 ccw
    
  </p>
</footer>
    
    
  </div>
</div>
</body>
</html>